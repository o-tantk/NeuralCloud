{% load static algorithm_extras %}
{% get_static_prefix as STATIC_PREFIX %}

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>뉴럴 클라우드 알고리즘표</title>
    <link rel="icon" type="image/x-icon" href="{{ STATIC_PREFIX }}algorithm/favicon.ico">
    <link rel="stylesheet" type="text/css" href="{{ STATIC_PREFIX }}algorithm/style.css?version={% now 'U' %}">
</head>

<body>

<h1>뉴럴 클라우드 알고리즘표</h1>

{% if sets %}
    <table>
        <caption>
            갱신일: {% now "Y-m-d" %}
            <br>
            <input type="checkbox" id="stat_abbr", onchange="onChangeAbbr(this)"><label for="stat_abbr">줄임말로 표시</label>
            <input type="checkbox" id="stat_secondary", onchange="onChangeSecondary(this)"><label for="stat_secondary">부옵 숨기기</label>
        </caption>
        <tr>
            <th>인형</th>
            <th>공격성</th>
            <th>안정성</th>
            <th>특이성</th>
        </tr>
    {% for s in sets %}
        <tr>
            <th>
                <figure>
                    <img src="{{ STATIC_PREFIX }}algorithm/doll_icon/{{ s.doll.name|lower }}.webp">
                    <figcaption>
                    {% with s.doll.get_doll_class_display|lower as doll_class %}
                        <img src="{{ STATIC_PREFIX }}algorithm/class_icon/{{ doll_class }}.webp" class="class_icon {{ doll_class }}"> {{ s.doll.name_kr }}
                    {% endwith %}
                    </figcaption>
                </figure>
            </td>
        {% for a in s.algorithm_list %}
            <td>
                <figure>
                    <img src="{{ STATIC_PREFIX }}algorithm/algo_icon/{{ a.algorithm.icon }}.webp" class="algorithm_icon">
                    <figcaption>
                        <b>{{ a.algorithm.name_kr }}</b>
                        <br>
                        <div class="stat default">{{ a.primary|join:" / " }}</div><div class="stat abbr" hidden>{% join_by_attr a.primary "alias_kr" " / " %}</div>
                        <div class="stat secondary">
                            <div class="stat default">{{ a.secondary|join:" / " }}</div><div class="stat abbr" hidden>{% join_by_attr a.secondary "alias_kr" " / " %}</div>
                        </div>
                    </figcaption>
                </figure>
            </td>
        {% endfor %}
        </tr>
    {% endfor %}
    </table>
    <table>
        <tr>
            <th>사용처 없음</th>
        </tr>
        <tr>
            <td>
            {% for a in useless_algos %}
                <figure>
                    <img src="{{ STATIC_PREFIX }}algorithm/algo_icon/{{ a.icon }}.webp" class="algorithm_icon">
                    <figcaption>{{ a.name_kr }}</figcaption>
                </figure>
            {% endfor %}
            </td>
        </tr>
    </table>
    <ul title="References" hidden>
        <li><a href="https://nalu.wiki/neuralcloud"></a></li>
        <li><a href="https://tangible-sorrel-c22.notion.site/PNCDB-dc548a0c6a8d4a4c839cdf2309ca6feb"></a></li>
        <li><a href="https://gall.dcinside.com/mgallery/board/view/?id=neuralcloud&no=183853"></a></li>
        <li><a href="https://arca.live/b/neuralcloud/64304242"></a></li>
        <li><a href="https://gall.dcinside.com/mgallery/board/view/?id=neuralcloud&no=72218"></a></li>
    </ul>
{% else %}
    <h1>NO DATA</h1>
{% endif %}

    <script src="{{ STATIC_PREFIX }}algorithm/script.js"></script>
</body>